# ========================================
# PRODUCTION CONFIGURATION
# ========================================

# Application Settings
spring.profiles.active=prod

# ========================================
# EMAIL CONFIGURATION (Office 365 SMTP)
# ========================================
spring.mail.host=smtp.office365.com
spring.mail.port=587
spring.mail.username=nvelusamy.adm@shanthigears.murugappa.com 
spring.mail.password=Payable@2025
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ========================================
# HDFC BANK API CONFIGURATION
# ========================================
# These values will be overridden by environment variables
bank.api.base-url=${BANK_API_URL}
bank.api.key=${BANK_API_KEY}
bank.api.client-id=${BANK_CLIENT_ID}
bank.api.client-secret=${BANK_CLIENT_SECRET}
bank.api.timeout=30000
bank.api.max-retries=3
bank.api.ssl-validation=true
bank.api.auth-type=OAUTH2

# Oracle H2H Configuration
oracle.h2h.api.url=${ORACLE_H2H_API_URL:https://api.oracleh2h.com/v1}
oracle.h2h.api.key=${ORACLE_H2H_API_KEY}
oracle.h2h.callback-url=${SERVER_URL}/api/v1/webhooks/oracle/payment-callback

# Payment Configuration
payment.reference.prefix=PAY
payment.retry.attempts=3
payment.retry.delay=5000

# Webhook Security
webhook.signature-header=X-Oracle-Signature
webhook.allowed-ips=127.0.0.1,192.168.1.0/24

# Bank Account Validation
bank.account.validation.enabled=true
bank.account.validation.endpoint=${ORACLE_H2H_API_URL}/validate/account

# SSL Configuration (if needed)
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=changeit
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=tomcatH2

bank.api.token-endpoint=/v1/oauth2/token
bank.api.payment-endpoint=/v1/payments
bank.api.balance-endpoint=/v1/accounts/balance
bank.api.statement-endpoint=/v1/accounts/statements

# Webhook Configuration
bank.api.webhook.url=${BANK_WEBHOOK_URL}
bank.api.webhook.secret=${BANK_WEBHOOK_SECRET}

# Security Settings
bank.api.ssl.keystore.path=${SSL_KEYSTORE_PATH}
bank.api.ssl.keystore.password=${SSL_KEYSTORE_PASSWORD}
bank.api.ssl.truststore.path=${SSL_TRUSTSTORE_PATH}
bank.api.ssl.truststore.password=${SSL_TRUSTSTORE_PASSWORD}

# ========================================
# DATABASE CONFIGURATION
# ========================================
# These values will be overridden by environment variables
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# ========================================
# EMAIL CONFIGURATION
# ========================================
# These values will be overridden by environment variables
spring.mail.host=${SMTP_HOST}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME}
spring.mail.password=${SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=*

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.root=INFO
logging.level.com.shanthigear=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.file.name=logs/application.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ========================================
# SECURITY CONFIGURATION
# ========================================
# Enable CSRF protection
spring.security.csrf.enabled=true

# Disable HTTP TRACE method
server.tomcat.additional-tomcat-connectors[0].protocol=org.apache.coyote.http11.Http11NioProtocol
server.tomcat.additional-tomcat-connectors[0].max-http-header-size=16384
server.tomcat.additional-tomcat-connectors[0].max-threads=200
server.tomcat.additional-tomcat-connectors[0].max-connections=10000
